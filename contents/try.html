<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from try.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>Exception Handling</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri-related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id373" name="id373">Exception Handling</a>
</h1><div class="para"><div>
 An <a id="id374" name="id374" class="targanchor"><dfn>exception</dfn></a> is something that is not expected in normal processing—a so-called "exception"—and in most cases, you can think of it as the same as an "error."<br />
</div></div>
<h1><a id="id375" name="id375">Where Exceptions Occur</a>
</h1><div class="para"><div>
 Exceptions can occur anywhere within a program.<br />
 Causing an exception to occur is also called "throwing" an exception.<br />
 For example, suppose the following script causes an error.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&quot;3%0&quot;!;&nbsp;<span class="comment">//&nbsp;An&nbsp;&quot;Attempted&nbsp;to&nbsp;divide&nbsp;by&nbsp;zero&quot;&nbsp;exception&nbsp;occurs</span></code>
<br />

<br />
 While there are cases like this where an exception clearly occurs, there are also cases where it is uncertain whether one will occur.<br />
</div></div>
<h1><a id="id376" name="id376">Catching Exceptions</a>
</h1><div class="para"><div>
 You can catch exceptions using the <code class="inlinecode"><a id="id377" name="id377" class="targanchor"><dfn>try</dfn></a></code> and <code class="inlinecode"><a id="id378" name="id378" class="targanchor"><dfn>catch</dfn></a></code> keywords.<br />
 For example, to catch an exception that might occur in the above example, you can write a script like the following.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;<span class="comment">//&nbsp;Because&nbsp;an&nbsp;exception&nbsp;might&nbsp;occur</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func1();&nbsp;<span class="comment">//&nbsp;An&nbsp;exception&nbsp;might&nbsp;occur&nbsp;here</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;<span class="comment">//&nbsp;Catch&nbsp;the&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This&nbsp;is&nbsp;executed&nbsp;when&nbsp;an&nbsp;exception&nbsp;occurs</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Unable&nbsp;to&nbsp;load&nbsp;the&nbsp;image.&quot;);&nbsp;<span class="comment">//&nbsp;Display&nbsp;a&nbsp;message</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 In this way, by writing processing that might cause an exception within the try block, you can execute the catch block when an exception occurs. Error handling can be written cleanly like this.<br />
<br />
 If no exception occurs within the try block, the catch block is not executed.<br />
<br />
 You can write anything in a try block. As in this example, there may be a clear possibility of an exception on a specific line, but even if an exception occurs deep within a nested function call, if you have written a try ... catch block, you can return to this point the moment the exception occurs.<br />
<br />
 If an exception occurs, the remaining processing in the block is interrupted, and control returns to the location of the try.<br />
<br />
 If another exception occurs within the catch block, that exception will not be caught at this location. Instead, the exception will trace back through function calls, and if exception catching is handled by another try block elsewhere, it will be caught there.<br />
<br />
 It is possible for another exception to occur between the time an exception is thrown and the time it reaches a catch block, but the behavior in such cases is undefined.<br />
<br />
 If an exception is not caught anywhere within the script, the exception will exit the script and be passed to the application, where it will be handled.<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
Normally, such exceptions will cause execution to stop as an error, so it is recommended to write try ... catch blocks in locations where errors are likely to occur.</div><br />
</div></div>
<h1><a id="id379" name="id379">Exception Objects</a>
</h1><div class="para"><div>
 Various information regarding an exception is thrown along with an object of a class called <a id="id380" name="id380" class="targanchor"><dfn>Exception</dfn></a>. This object is called an exception object. You can receive this object in the catch block.<br />
 For example, you can write a script like the following.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadImages(&quot;nothing.jpeg&quot;);&nbsp;<span class="comment">//&nbsp;Processing&nbsp;that&nbsp;might&nbsp;cause&nbsp;an&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;(e)&nbsp;<span class="comment">//&nbsp;Receive&nbsp;the&nbsp;exception&nbsp;in&nbsp;variable&nbsp;e</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;e.message&nbsp;represents&nbsp;the&nbsp;message&nbsp;string&nbsp;thrown&nbsp;with&nbsp;the&nbsp;exception.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This&nbsp;may&nbsp;contain&nbsp;an&nbsp;explanation&nbsp;of&nbsp;why&nbsp;the&nbsp;exception&nbsp;occurred.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Unable&nbsp;to&nbsp;load&nbsp;the&nbsp;image.\n&quot;+e.message);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

 In this way, you can write a variable name inside parentheses after the catch keyword to receive the exception object in that variable.<br />
 The scope of this variable begins within the block following catch and ends with that block. This variable does not need to be declared in advance.<br />
</div></div>
<h1><a id="id381" name="id381">throw Statement</a>
</h1><div class="para"><div>
 You can also throw exceptions yourself. To throw an exception, use the <code class="inlinecode"><a id="id382" name="id382" class="targanchor"><dfn>throw</dfn></a></code> keyword.<br />
 For example, you can write a script like the following.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;pow2(n)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Calculates&nbsp;2&nbsp;to&nbsp;the&nbsp;power&nbsp;of&nbsp;n.&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;positive&nbsp;integer.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(n&lt;0)&nbsp;throw&nbsp;new&nbsp;Exception(&quot;Negative&nbsp;numbers&nbsp;cannot&nbsp;be&nbsp;specified.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Throws&nbsp;an&nbsp;exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&lt;&lt;n;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

 If a negative number such as -1 is passed as an argument to this function, an exception occurs. The following statement is what throws the exception.<br />
<br />

<br />
<code class="bq">throw&nbsp;new&nbsp;Exception(&quot;Negative&nbsp;numbers&nbsp;cannot&nbsp;be&nbsp;specified.&quot;);</code>
<br />

<br />
 Regarding <code class="inlinecode">new Exception("Negative numbers cannot be specified.")</code>, this creates an object of the Exception class with a string as an argument. For details, please refer to the Exception class documentation. Then, this newly created object is thrown using the throw keyword.<br />
 Objects other than those of the Exception class can also be thrown with the throw keyword. You can throw numbers, strings, or even references to functions. However, it is recommended to throw objects of the Exception class or classes derived from it. This is because you can then write your catch blocks assuming that only objects of the Exception class will be received.<br />
</div></div>
<h1><a id="id383" name="id383">Rethrowing Exceptions</a>
</h1><div class="para"><div>
 You may have caught an exception with catch, but there might be a try block declared elsewhere that could still receive the exception; in such cases, you can throw the exception again.<br />
 You can write a script like the following.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;tryloadimage()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primaryLayer.loadImages(&quot;test1.bmp&quot;);&nbsp;<span class="comment">//&nbsp;Try&nbsp;reading&nbsp;test1.bmp</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Image&nbsp;loading&nbsp;failed.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;e;&nbsp;<span class="comment">//&nbsp;Displays&nbsp;a&nbsp;message,&nbsp;but&nbsp;throws&nbsp;the&nbsp;exception&nbsp;again</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Calls&nbsp;tryloadimage;&nbsp;returns&nbsp;true&nbsp;if&nbsp;image&nbsp;loading&nbsp;succeeds,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;otherwise&nbsp;returns&nbsp;false.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tryloadimage();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

 In this case, if test() is called and image loading fails, a message will be displayed by the inform method, but since the exception is thrown again, it can be caught by the catch block within the test function.<br />
</div></div>
	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>
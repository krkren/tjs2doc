<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from pp.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>Preprocessor</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri-related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id273" name="id273">Preprocessor</a>
</h1><div class="para"><div>
 TJS2 can process <a id="id274" name="id274" class="targanchor"><dfn>conditional compilation expressions</dfn></a> (corresponding to #if and #endif in C). These are processed before the script is actually interpreted, allowing parts of the script to be excluded or included based on certain conditions.<br />
 Unlike C preprocessor directives, the style of conditional compilation expressions is free-form and can be written anywhere. There is no requirement to write only one directive per line, as is the case with C directives.<br />
</div></div>
<h1><a id="id275" name="id275">@set Directive</a>
</h1><div class="para"><div>
 The @set directive evaluates a conditional compilation expression and discards the result. The syntax is as follows:
<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@set(expression)<br />
</code>
<br />

 Specify a conditional compilation expression in "expression". The following operators can be used here:<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;=&nbsp;&nbsp;!=&nbsp;&nbsp;==&nbsp;&nbsp;||&nbsp;&nbsp;&amp;&amp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;&nbsp;&amp;&nbsp;&nbsp;&lt;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&lt;=&nbsp;&nbsp;&gt;=&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;%&nbsp;&nbsp;*&nbsp;&nbsp;/&nbsp;&nbsp;!&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;(&nbsp;)<br />
</code>
<br />

 For the meaning of these operators, please see <a target="main" class="jump" href="expr_and_op.html">Expressions and Operators</a>. However, the only data type that can be handled is integer.<br />
 Additionally, arbitrary variables and literals can be used. For variable naming conventions, the same rules as those for variables and literals in <a target="main" class="jump" href="token.html">Tokens</a> apply.<br />
 However, variables used in the preprocessor and variables used in the TJS2 script do not interfere with each other (they do not share the same namespace).<br />
</div></div>
<h1><a id="id276" name="id276">@if Directive, @endif Directive</a>
</h1><div class="para"><div>
 The @if directive evaluates a conditional compilation expression, and if the result is 0, the section until the next @endif is not interpreted. If the result is non-zero, it is interpreted.<br />
 The syntax is as follows:<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@if(expression)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
</code>
<br />

&nbsp;&nbsp;&nbsp;&nbsp;Specify a conditional compilation expression in "expression". @if ... @endif can be nested.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;@if(flag==0)&nbsp;&nbsp;<span class="comment">//&nbsp;Variables&nbsp;that&nbsp;have&nbsp;not&nbsp;been&nbsp;assigned&nbsp;anything&nbsp;yet&nbsp;are&nbsp;considered&nbsp;to&nbsp;be&nbsp;0</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@set(flag=1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Makes&nbsp;the&nbsp;compilation&nbsp;of&nbsp;the&nbsp;script&nbsp;written&nbsp;in&nbsp;the&nbsp;****&nbsp;part&nbsp;happen&nbsp;only&nbsp;once</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;@if(version&gt;=0x02040009)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@if(flag)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;Compiles&nbsp;the&nbsp;****&nbsp;part&nbsp;only&nbsp;when&nbsp;version&nbsp;is&nbsp;0x02040009&nbsp;(2.4.9)&nbsp;or&nbsp;higher&nbsp;and&nbsp;flag&nbsp;is&nbsp;non-zero</span><br />
</code>
<br />

</div></div>
<h1><a id="id277" name="id277">Predefined Variables</a>
</h1><div class="para"><div>
 The <a id="id278" name="id278" class="targanchor"><dfn>version</dfn></a> variable represents the current version of TJS2.<br />
<br />
 As a numerical value, it is in the format 0x0XYYZZZZ in hexadecimal, where X is the major version, YY is the minor version, and ZZZZ is the release number. For example, if it is 0x02040009, the version is 2.4.9.</div></div>
	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>
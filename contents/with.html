<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from with.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>with Statement</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri-related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id601" name="id601">with Statement</a>
</h1><div class="para"><div>
	The <a id="id602" name="id602" class="targanchor"><dfn>with</dfn></a> statement is used to specify the object to be referenced when the left side (the object) of a <code class="inlinecode">.</code> (dot) operator is omitted.<br />
<br />
	The syntax is as follows:<br />

<br />
<code class="bq">with(expression)<br />
&nbsp;&nbsp;&nbsp;&nbsp;statement or block<br />
</code>
<br />

<br />
	Within the "statement or block", if a <code class="inlinecode">.</code> (dot) operator is used with its left side omitted, the object referenced by that <code class="inlinecode">.</code> (dot) operator will be the object specified by the expression in the with statement.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;with(obj)&nbsp;.member&nbsp;=&nbsp;1;&nbsp;<span class="comment">//&nbsp;Same&nbsp;as&nbsp;obj.member&nbsp;=&nbsp;1;</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;with(obj)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.member1&nbsp;=&nbsp;1;&nbsp;<span class="comment">//&nbsp;Assign&nbsp;1&nbsp;to&nbsp;obj.member1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.member2&nbsp;=&nbsp;2;&nbsp;<span class="comment">//&nbsp;Assign&nbsp;2&nbsp;to&nbsp;obj.member2</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.member3++;&nbsp;<span class="comment">//&nbsp;Increment&nbsp;obj.member3</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.method();&nbsp;<span class="comment">//&nbsp;Call&nbsp;obj.method</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
	This statement can reduce typing, especially when setting a large number of properties on an object or calling methods consecutively.<br />
<br />
	For example:<br />
<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;object&nbsp;=&nbsp;new&nbsp;Foo();<br />
&nbsp;&nbsp;&nbsp;&nbsp;object.setPos(0,&nbsp;0);<br />
&nbsp;&nbsp;&nbsp;&nbsp;object.setSize(100,&nbsp;100);<br />
&nbsp;&nbsp;&nbsp;&nbsp;object.name&nbsp;=&nbsp;&quot;Unnamed&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;object.color&nbsp;=&nbsp;0xffffffff;<br />
</code>
<br />

<br />
	A script like the one above can be written as follows:<br />
<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;object&nbsp;=&nbsp;new&nbsp;Foo();<br />
&nbsp;&nbsp;&nbsp;&nbsp;with(object)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.setPos(0,&nbsp;0);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.setSize(100,&nbsp;100);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.name&nbsp;=&nbsp;&quot;Unnamed&quot;;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.color&nbsp;=&nbsp;0xffffffff;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
</div></div>
<h1><a id="id603" name="id603">with Statement and Objects</a>
</h1><div class="para"><div>
	The expression specified in the with statement is evaluated only once at the beginning when the with statement is executed, and thereafter it is simply referenced.<br />
<br />
	For example,<br />
<br />

<br />
<code class="bq">this.dic&nbsp;=&nbsp;%[];<br />
with(this.dic)<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;.member&nbsp;=&nbsp;1;&nbsp;<span class="comment">//&nbsp;Assign&nbsp;1&nbsp;to&nbsp;this.dic.member</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;this.dic&nbsp;=&nbsp;0;&nbsp;<span class="comment">//&nbsp;Assign&nbsp;something&nbsp;else&nbsp;to&nbsp;dic</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;.member&nbsp;=&nbsp;2;&nbsp;<span class="comment">//&nbsp;Assign&nbsp;2&nbsp;to&nbsp;this.dic.member</span><br />
}<br />
</code>
<br />

<br />
	even if written this way, the second assignment to .member will succeed. This is because this.dic is evaluated at the initial state when with is executed, and thereafter that evaluated result is used. It does not evaluate this.dic every time.<br />
<br />
	Because the evaluation occurs only once at the start, in cases where an object is referenced many times, the code to reference the object is not generated every time, which may result in faster performance.<br />
<br />
	The above example can be considered to generate code equivalent to the following:<br />
<br />

<br />
<code class="bq">this.dic&nbsp;=&nbsp;%[];<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;unnamed_special_local_variable&nbsp;=&nbsp;this.dic;<br />
&nbsp;&nbsp;&nbsp;&nbsp;unnamed_special_local_variable.member&nbsp;=&nbsp;1;<br />
&nbsp;&nbsp;&nbsp;&nbsp;this.dic&nbsp;=&nbsp;0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;unnamed_special_local_variable.member&nbsp;=&nbsp;2;<br />
}<br />
</code>
<br />

<br />
	In a with statement, the result of evaluating the expression is assigned to an unnamed special local variable that can only be accessed via the . (dot) operator with the left side omitted. Thereafter, the . (dot) operator with the left side omitted will refer to that "unnamed special local variable".<br />
	The scope in which the evaluation result of the expression is held can be considered the same as the local variable scope of the "unnamed special local variable" mentioned above (and the range affected by the with statement follows this as well).<br />
</div></div>

<h1><a id="id604" name="id604">The . Operator Outside of with Statements</a>
</h1><div class="para"><div>
	If the left side of the <code class="inlinecode">.</code> (dot) operator is omitted outside of a with statement, it will refer to the global object.<br />
	For example, writing<br />
<br />
<code class="inlinecode">.foo = 1;</code><br />
<br />
	outside of a with statement has the same meaning as<br />
<br />
<code class="inlinecode">global.foo = 1;</code><br />
.<br />
</div></div>
	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>
<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from variant.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>tTJSVariant Type</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri-related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id438" name="id438">What is tTJSVariant?</a>
</h1><div class="para"><div>
	The tTJSVariant type is a type used to handle "variable" data in TJS2.<br />
	The tTJSVariant type has internal types, and a single type can represent void (undefined), objects, integers, real numbers, strings, and octet streams.<br />
	Additionally, it automatically handles the conversion of these internal types for operations.<br />
</div></div>


<h1><a id="id439" name="id439">tTJSVariantType</a>
</h1><div class="para"><div>
	This is an enumeration type representing the internal type of tTJSVariant. It can be obtained using the tTJSVariant::<a id="id440" name="id440" class="targanchor"><dfn>Type</dfn></a> method.<br />
<br />
<dl>
<dt><a id="id441" name="id441" class="targanchor"><dfn>tvtVoid</dfn></a></dt>
<dd>Void type. This is the type when a tTJSVariant type is constructed with a constructor without arguments. It is not null.</dd>
<dt><a id="id442" name="id442" class="targanchor"><dfn>tvtObject</dfn></a></dt>
<dd>Object type. If it is null, it takes this internal type.</dd>
<dt><a id="id443" name="id443" class="targanchor"><dfn>tvtString</dfn></a></dt>
<dd>String type.</dd>
<dt><a id="id444" name="id444" class="targanchor"><dfn>tvtOctet</dfn></a></dt>
<dd>Octet stream type.</dd>
<dt><a id="id445" name="id445" class="targanchor"><dfn>tvtInteger</dfn></a></dt>
<dd>Integer type. It holds a numerical value of the tTVInteger type.</dd>
<dt><a id="id446" name="id446" class="targanchor"><dfn>tvtReal</dfn></a></dt>
<dd>Real number type. It holds a numerical value of the tTVReal type.</dd></dl></div></div>

<h1><a id="id447" name="id447">Object Reference</a>
</h1><div class="para"><div>
	Among the internal types, objects are managed using a reference counting method.<br />
	While tTJSVariant itself manages reference counting automatically, please note that it does not handle reference count management after an object pointer is retrieved via methods that obtain the <a target="main" class="jump" href="interface.html">iTJSDispatch2 interface</a> or the tTJSVariantClosure type from tTJSVariant.<br />
</div></div>


<h1><a id="id448" name="id448">Object Type</a>
</h1><div class="para"><div>
	The <a id="id449" name="id449" class="targanchor"><dfn>tTJSVariantClosure</dfn></a> type is the type that holds objects inside tTJSVariant. This type has a mechanism to hold two iTJSDispatch2 interfaces: one for the object itself and another for the context information where that object is executed.<br />
	The tTJSVariantClosure type possesses each of the methods found in the iTJSDispatch2 interface. By accessing these methods through tTJSVariantClosure, the execution context can be handled correctly.<br />
<br />
	There are two methods to retrieve the tTJSVariantClosure type from the tTJSVariant type: tTJSVariant::<a id="id450" name="id450" class="targanchor"><dfn>AsObjectClosure</dfn></a> and tTJSVariant::<a id="id451" name="id451" class="targanchor"><dfn>AsObjectClosureNoAddRef</dfn></a>. The former increments the object's reference count, while the latter does not.<br />
	Since the tTJSVariantClosure type does not have a mechanism to automatically manage reference counts, care must be taken regarding reference count management after extracting the tTJSVariantClosure type from the tTJSVariant type.<br />
</div></div>


<h1><a id="id452" name="id452">String Type</a>
</h1><div class="para"><div>
	Strings in TJS2 are managed using a reference counting method; in simple copies, only the string's reference count increases, and the actual string content is not duplicated.<br />
	The tTJSVariantString type is a type used for managing strings in the tTJSVariant and <a id="id453" name="id453" class="targanchor"><dfn>tTJSString</dfn></a> types. To retrieve the tTJSVariantString type from the tTJSVariant type, you can use tTJSVariant::<a id="id454" name="id454" class="targanchor"><dfn>AsString</dfn></a> (this method increments the reference count). However, since the tTJSVariantString type itself does not have a mechanism to automatically manage reference counts, caution is required when using tTJSVariantString.<br />
	Since the tTJSString type can manage the reference count, it is easier to convert it to the tTJSString type (conversion operators between tTJSVariant and tTJSString are defined).<br />
</div></div>

<h1><a id="id455" name="id455">Octet Stream Type</a>
</h1><div class="para"><div>
	Octet streams in TJS2 are also managed via a reference counting method, just like the string type.<br />
	The <a id="id456" name="id456" class="targanchor"><dfn>tTJSVariantOctet</dfn></a> type is a type for managing octet streams. Please note that, like tTJSVariantString and tTJSVariantClosure, this type does not have a mechanism for managing reference counts. To retrieve the tTJSVariantOctet type from the tTJSVariant type, you can use tTJSVariant::<a id="id457" name="id457" class="targanchor"><dfn>AsOctet</dfn></a> (increments the reference count) or tTJSVariant::<a id="id458" name="id458" class="targanchor"><dfn>AsOctetNoAddRef</dfn></a> (does not increment the reference count).<br />
</div></div>


<h1><a id="id459" name="id459">Conversion</a>
</h1><div class="para"><div>
	Since various conversion operators and constructors are defined for tTJSVariant, it can be handled like a primitive type.<br />
	As mentioned above, great care must be taken when performing conversions with types managed by reference counting.<br />
</div></div>

<h1><a id="id460" name="id460">Operations</a>
</h1><div class="para"><div>
	Since various operators are overloaded, operations can also be performed just like with primitive types. Type conversions required during the operation process are handled automatically.<br />
</div></div>

	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>
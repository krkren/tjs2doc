<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from function.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS" />
	<title>Functions</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="トップページ" />
</head>
<body>
<h1><a id="id199" name="id199">Functions</a>
</h1><div class="para"><div>
 TJS2 functions are almost synonymous with <a id="id200" name="id200" class="targanchor"><dfn>subroutines</dfn></a>. Cases where no value is returned are also treated as functions.<br />
 In particular, functions that are members of a class or object are sometimes called "<a id="id201" name="id201" class="targanchor"><dfn>methods</dfn></a>."<br />
</div></div>
<h1><a id="id202" name="id202">How to Write Functions</a>
</h1><div class="para"><div>
 Functions can be written in the following format:<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;FunctionName&nbsp;(&nbsp;ArgumentList&nbsp;)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FunctionContent<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 First, to define a function, write <a id="id203" name="id203" class="targanchor"><dfn>function</dfn></a>. After that, write the name of the function. The function becomes available using the name written here.<br />
 In the function content, you can describe the statements and blocks you want to execute within the function.<br />
<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a)&nbsp;{&nbsp;System.inform(a);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(a,&nbsp;b,&nbsp;c,&nbsp;d)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(a);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(b);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(c);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test(d);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a+b-c*d;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
Using the instanceof operator on a function with "Function" will return true (in the above example, func instanceof "Function" is true).<br />
</div></div>
<h1><a id="id204" name="id204">Calling Functions</a>
</h1><div class="para"><div>
 Function calls are written using the <a id="id205" name="id205" class="targanchor"><dfn>( )</dfn></a> operator as follows:<br />
<code class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;FunctionName( Arguments )<br />
</code>&nbsp;&nbsp;&nbsp;&nbsp;If there are no arguments, it becomes <code class="inlinecode">FunctionName( )</code>. For arguments, specify expressions, and if there are multiple, separate them with commas.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;func();<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(1+2,&nbsp;1-2);<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(func2());<br />
</code>
<br />

<br />
&nbsp;&nbsp;&nbsp;&nbsp;Also, if you leave an argument blank without specifying an expression, it is considered that void was specified for that part.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;func(,1);&nbsp;<span class="comment">//&nbsp;Treated&nbsp;as&nbsp;if&nbsp;void,&nbsp;1&nbsp;were&nbsp;specified</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func(,);&nbsp;<span class="comment">//&nbsp;Treated&nbsp;as&nbsp;if&nbsp;void,&nbsp;void&nbsp;were&nbsp;specified</span><br />
</code>
<br />

</div></div>
<h1><a id="id206" name="id206">Argument List</a>
</h1><div class="para"><div>
 In the argument list, you write the names of variables to receive the passed arguments. Among the arguments passed during the function call, they are assigned to variables in the order they are written, starting from the first one.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a,&nbsp;b,&nbsp;c)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;At&nbsp;this&nbsp;point,&nbsp;variables&nbsp;a,&nbsp;b,&nbsp;and&nbsp;c&nbsp;are&nbsp;available,&nbsp;and</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;the&nbsp;three&nbsp;arguments&nbsp;passed&nbsp;are&nbsp;assigned&nbsp;to&nbsp;them.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1,&nbsp;2,&nbsp;3),&nbsp;a&nbsp;will&nbsp;contain&nbsp;1,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;b&nbsp;will&nbsp;contain&nbsp;2,&nbsp;and&nbsp;c&nbsp;will&nbsp;contain&nbsp;3.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 These arguments are local variables and become inaccessible once execution leaves the function.<br />
<br />
 In TJS2, it is not an error if the number of arguments provided in a function call is fewer or more than the number of declared arguments (exceptionally, functions not written in TJS2 (functions written in C++, etc.) may result in an error). If more arguments are provided than declared, the extra ones are ignored; if fewer, void is passed to the missing variables.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a,&nbsp;b)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1),&nbsp;a&nbsp;gets&nbsp;1&nbsp;and&nbsp;b&nbsp;gets&nbsp;void.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;test(1,2,3),&nbsp;a&nbsp;gets&nbsp;1,&nbsp;b&nbsp;gets&nbsp;2,&nbsp;and&nbsp;3&nbsp;is&nbsp;ignored.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 For individual arguments in the argument list, a default value (<a id="id207" name="id207" class="targanchor"><dfn>default argument</dfn></a>) can be specified following "=". This means that when void is specified or when the provided arguments are fewer than the declared arguments, the specified value is automatically used.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test(a&nbsp;=&nbsp;-1,&nbsp;b&nbsp;=&nbsp;1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If...</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(),&nbsp;a=-1,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(5),&nbsp;a=5,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(void,void),&nbsp;a=-1,&nbsp;b=1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Called&nbsp;as&nbsp;test(,4),&nbsp;a=-1,&nbsp;b=4</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 For functions that do not need to receive arguments, the argument list can be omitted.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Function&nbsp;that&nbsp;receives&nbsp;no&nbsp;arguments</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

</div></div>
<h1><a id="id208" name="id208">Inline Functions</a>
</h1><div class="para"><div>
 By using the function keyword within an expression, you can create a nameless function, an inline function (<a id="id209" name="id209" class="targanchor"><dfn>anonymous function</dfn></a>).<br />
 In this case, the name of the function is omitted.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;func&nbsp;=&nbsp;function(i)&nbsp;{&nbsp;return&nbsp;i*5;&nbsp;};<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;func2&nbsp;=&nbsp;function&nbsp;{&nbsp;System.inform(&quot;hoge&quot;);&nbsp;};<br />
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;func();&nbsp;<span class="comment">//&nbsp;func&nbsp;call</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func2();&nbsp;<span class="comment">//&nbsp;func2&nbsp;call</span><br />
</code>
<br />

</div></div>
<h1><a id="id210" name="id210">Omitting Arguments</a>
</h1><div class="para"><div>
 When calling a function, if you write only <a id="id211" name="id211" class="targanchor"><dfn>...</dfn></a> as an argument, the arguments passed to the function containing that call expression are passed exactly as they are to the called function. This ensures that the correct original content and count of arguments are passed, even if the argument variables have been modified or the received arguments were insufficient.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test2(...);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;The&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;test&nbsp;are&nbsp;passed&nbsp;to&nbsp;test2&nbsp;with&nbsp;the</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;content&nbsp;and&nbsp;count&nbsp;exactly&nbsp;as&nbsp;they&nbsp;were&nbsp;when&nbsp;received.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

</div></div>
<h1><a id="id212" name="id212">Converting Arguments to an Array</a>
</h1><div class="para"><div>
 Arguments can be received as an array. To receive them as an array, declare the function with '<a id="id213" name="id213" class="targanchor"><dfn>*</dfn></a>' attached to the argument name.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(args*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;args&nbsp;becomes&nbsp;an&nbsp;array&nbsp;containing&nbsp;the&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;this&nbsp;function&nbsp;as&nbsp;elements.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;called&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4),&nbsp;args&nbsp;contains&nbsp;4&nbsp;elements,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;with&nbsp;numerical&nbsp;values&nbsp;in&nbsp;the&nbsp;order&nbsp;of&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4&nbsp;from&nbsp;the&nbsp;start.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 It is also possible to receive everything from the middle to the end of the arguments as an array. If the number of arguments is insufficient, the array will be empty.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(x,&nbsp;args*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;called&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4),&nbsp;x&nbsp;gets&nbsp;1.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Also,&nbsp;args&nbsp;contains&nbsp;3&nbsp;elements,&nbsp;with&nbsp;numerical&nbsp;values</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;in&nbsp;the&nbsp;order&nbsp;of&nbsp;2,&nbsp;3,&nbsp;4&nbsp;from&nbsp;the&nbsp;start.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;If&nbsp;called&nbsp;as&nbsp;func(1),&nbsp;since&nbsp;the&nbsp;required&nbsp;number&nbsp;of&nbsp;arguments&nbsp;is&nbsp;not&nbsp;met,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;args&nbsp;becomes&nbsp;an&nbsp;empty&nbsp;array&nbsp;with&nbsp;no&nbsp;elements.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

 This is useful when you want to handle variable-length arguments.<br />
<br />
 It is also possible not to specify an argument name. In this case, it can be used as an unnamed * during the expansion of an array into arguments described below.<br />
</div></div>
<h1><a id="id214" name="id214">Expanding Arrays into Arguments</a>
</h1><div class="para"><div>
 An array can be expanded and passed to a function as arguments. In this case, similar to when expanding arguments into an array, call the function by attaching '<a id="id215" name="id215" class="targanchor"><dfn>*</dfn></a>' after the expression you want to expand. The expression you want to expand by specifying '*' must represent an array.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;args&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3,&nbsp;4];<br />
&nbsp;&nbsp;&nbsp;&nbsp;func(args*);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Since&nbsp;args&nbsp;contains&nbsp;the&nbsp;four&nbsp;elements&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;this&nbsp;has&nbsp;the&nbsp;same&nbsp;meaning&nbsp;as&nbsp;func(1,&nbsp;2,&nbsp;3,&nbsp;4);.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;func(0,&nbsp;args*,&nbsp;5);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;It&nbsp;is&nbsp;also&nbsp;possible&nbsp;to&nbsp;insert&nbsp;it&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;arguments&nbsp;like&nbsp;this.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;In&nbsp;this&nbsp;case,&nbsp;it&nbsp;has&nbsp;the&nbsp;same&nbsp;meaning&nbsp;as&nbsp;func(0,&nbsp;1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5);.</span><br />
</code>
<br />

<br />
 By specifying just * as an argument without an expression, you can pass the arguments represented by the unnamed '*' written at the time of declaring the function containing the call expression directly to the call destination.
<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(func_array,&nbsp;*)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Call&nbsp;the&nbsp;functions&nbsp;specified&nbsp;in&nbsp;func_array,&nbsp;passing&nbsp;the&nbsp;position&nbsp;of</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;the&nbsp;function&nbsp;within&nbsp;func_array&nbsp;followed&nbsp;by&nbsp;the&nbsp;2nd&nbsp;and&nbsp;subsequent</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;arguments&nbsp;passed&nbsp;to&nbsp;func&nbsp;as&nbsp;they&nbsp;are.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(var&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;func_array.count;&nbsp;i++)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func_array[i](i,&nbsp;*);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
 Function calling using an unnamed * can be processed more efficiently than using a named array.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(ar*)&nbsp;{&nbsp;func2(ar*);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(*)&nbsp;{&nbsp;func2(*);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;The&nbsp;above&nbsp;two&nbsp;have&nbsp;exactly&nbsp;the&nbsp;same&nbsp;meaning,&nbsp;but&nbsp;the&nbsp;lower&nbsp;example&nbsp;is&nbsp;more&nbsp;efficient.</span><br />
</code>
<br />

<br />
 An unnamed * has the same effect as "Omitting Arguments." The following two function declarations have the same meaning.<br />

<br />
<code class="bq"><span class="weak">Example:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func()&nbsp;{&nbsp;func2(...);&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;func(*)&nbsp;{&nbsp;func2(*);&nbsp;}<br />
</code>
<br />

</div></div>
	<script type="text/javascript" charset="Shift_JIS" src="documentid.js" ></script>
	<script type="text/javascript" charset="Shift_JIS" src="postcontent.js" ></script>
</body>
</html>